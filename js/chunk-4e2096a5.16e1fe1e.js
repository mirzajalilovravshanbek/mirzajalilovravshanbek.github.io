(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e2096a5"],{"1b95":function(t,e,a){},"3f8d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"rmk-bg"},[""!=t.$store.state.errors?e("div",{class:""!=t.$store.state.errors?"alert alert-danger text-center p-1 notifications active":""},[e("button",{staticClass:"close",attrs:{type:"button","aria-hidden":"true"},on:{click:function(e){t.$store.state.errors=""}}},[e("b-icon",{attrs:{"font-scale":"2",icon:"x"}})],1),e("h4",[e("i",{staticClass:"fas fa-exclamation-triangle"}),t._v("  "+t._s(t.$t("Хатолик"))+" "+t._s(t.Interval())+" ")]),e("p",{staticClass:"text-center"},[t._v(t._s(t.$store.state.errors))]),t.$store.state.arr_errors.length>0&&void 0!=t.$store.state.arr_errors?e("ol",t._l(t.$store.state.arr_errors,(function(a,s){return e("li",{key:s},[t._v(" "+t._s(a.msg)+" ")])})),0):t._e()]):t._e(),e("b-container",{staticClass:"rmk-back",attrs:{fluid:""}},[e("md-card",{staticClass:"rmk-login-box"},[e("b-row",[e("b-col",{staticClass:"rmk-label",attrs:{md:"12",sm:"12",lg:"12",xl:"12"}},[e("span",[t._v("Sign In")])]),e("b-col",{attrs:{md:"12",sm:"12",lg:"12",xl:"12"}},[e("div",{staticClass:"rmk-district"},[e("md-card",{staticClass:"mb-0 mt-1",staticStyle:{"z-index":"11"}},[e("v-select",{attrs:{clearable:!0,options:t.branches,reduce:function(t){return t.id},label:"name",placeholder:"Select branch..."},on:{input:function(e){return t.GetUsers()}},model:{value:t.datas.branch_id,callback:function(e){t.$set(t.datas,"branch_id",e)},expression:"datas.branch_id"}})],1)],1)]),e("b-col",{attrs:{md:"12",sm:"12",lg:"12",xl:"12"}},[e("div",{staticClass:"rmk-district"},[e("md-card",{staticClass:"my-1",staticStyle:{"z-index":"10"}},[e("v-select",{attrs:{clearable:!0,options:t.users,reduce:function(t){return t.username},label:"username",placeholder:"Select employee..."},on:{input:function(e){return t.CheckUser()}},model:{value:t.datas.username,callback:function(e){t.$set(t.datas,"username",e)},expression:"datas.username"}})],1),t.checkUser?e("small",{staticClass:"alert alert-danger d-block p-0 m-0"},[t._v("Must to select an employee")]):t._e()],1)]),e("b-col",{attrs:{md:"12",sm:"12",lg:"12",xl:"12"}},[e("div",{staticClass:"rmk-district"},[e("md-card",{staticClass:"my-1 p-0"},[e("md-field",{staticClass:"m-0 px-1"},[e("label",{staticStyle:{color:"#000!important"}},[t._v("Password")]),e("md-input",{attrs:{type:"password"},on:{blur:function(e){return t.CheckPassword()},keyup:t.InputSend},model:{value:t.datas.password,callback:function(e){t.$set(t.datas,"password",e)},expression:"datas.password"}})],1)],1),t.checkPassword?e("small",{staticClass:"alert alert-danger d-block p-0 m-0"},[t._v("Must to fill password")]):t._e()],1)]),e("b-col",{attrs:{md:"5","offset-md":"1",sm:"5","offset-sm":"1",lg:"5","offset-lg":"1",xl:"5","offset-xl":"1"}},[e("b-button",{staticClass:"rmk-center mt-2",attrs:{size:"lg",variant:"outline-primary",block:"",disabled:t.sending},on:{click:function(e){return t.Send()}}},[t.sending?e("b-spinner",{attrs:{small:""}}):t._e(),t._v(" Login ")],1)],1),e("b-col",{attrs:{md:"5",sm:"5",lg:"5",xl:"5"}},[e("b-button",{staticClass:"rmk-center-back mt-2",staticStyle:{color:"#000"},attrs:{size:"lg",variant:"outline-danger",block:""},on:{click:function(e){return t.Clear()}}},[t._v(" Cancel ")])],1)],1)],1)],1)],1)},r=[],n=a("c7eb"),c=a("1da1"),l=(a("14d9"),{data:function(){return{datas:{branch_id:null,username:null,password:null},branches:[],users:[],checkBranch:!1,checkUser:!1,checkPassword:!1,sending:!1}},mounted:function(){var t=this;return Object(c["a"])(Object(n["a"])().mark((function e(){var a,s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.prev=1,e.next=4,a.axios.get("api/branch");case 4:s=e.sent,a.branches=s.data,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:if(null===localStorage.getItem("branch_id")){e.next=14;break}return a.datas.branch_id=parseInt(localStorage.getItem("branch_id")),e.next=14,a.GetUsers();case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))()},methods:{Interval:function(){var t=this;setTimeout((function(){t.$store.state.errors="",t.$store.state.arr_errors=[]}),5e3)},GetUsers:function(){var t=this;return Object(c["a"])(Object(n["a"])().mark((function e(){var a,s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,null===localStorage.getItem("branch_id")&&localStorage.setItem("branch_id",a.datas.branch_id),e.prev=2,e.next=5,a.axios.get("api/user/branch/"+a.datas.branch_id);case 5:s=e.sent,a.users=s.data,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})))()},InputSend:function(t){"Enter"===t.key&&this.Send()},CheckUser:function(){var t=this;null==t.datas.username?t.checkUser=!0:t.checkUser=!1},CheckPassword:function(){var t=this;null==t.datas.password?t.checkPassword=!0:t.checkPassword=!1},Send:function(){var t=this;return Object(c["a"])(Object(n["a"])().mark((function e(){var a,s;return Object(n["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,a.CheckUser(),a.CheckPassword(),0!=a.checkUser||0!=a.checkPassword){e.next=16;break}return a.sending=!0,e.prev=5,e.next=8,axios.post("api/user/login",a.datas);case 8:s=e.sent,s&&(localStorage.setItem("oid",s.data.id),localStorage.setItem("branch_id",s.data.branch_id),localStorage.setItem("did",s.data.doctor_id),localStorage.setItem("cid",s.data.inspection_category_id),localStorage.setItem("username",s.data.username),localStorage.setItem("role",s.data.role),localStorage.setItem("t",s.data.token),a.$router.push({path:"/patient/index"})),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](5),a.datas.password=null;case 15:a.sending=!1;case 16:case"end":return e.stop()}}),e,null,[[5,12]])})))()},Clear:function(){this.datas.branch_id=null,this.datas.username=null,this.datas.password=null,this.sending=!1}}}),o=l,i=(a("f877"),a("2877")),d=Object(i["a"])(o,s,r,!1,null,"743730fa",null);e["default"]=d.exports},f877:function(t,e,a){"use strict";a("1b95")}}]);
//# sourceMappingURL=chunk-4e2096a5.16e1fe1e.js.map